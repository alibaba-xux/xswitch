!function(e){var t={};function n(r){if(t[r])return t[r].exports;var E=t[r]={i:r,l:!1,exports:{}};return e[r].call(E.exports,E,E.exports,n),E.l=!0,E.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var E in e)n.d(r,E,function(t){return e[t]}.bind(null,E));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REG={TRIM_JSON:/(,+)([^a-z0-9["])/gi,CHROME_EXTENSION:/^chrome-extension:\/\//i,FORWARD:/\\|\[|]|\(|\)|\*|\$|\^/i,WHITESPACE:/\s+/g,X_HEADER:/^x-/},t.ALL_URLS="<all_urls>",t.BLOCKING="blocking",t.REQUEST_HEADERS="requestHeaders",t.RESPONSE_HEADERS="responseHeaders",t.DEFAULT_CREDENTIALS_RESPONSE_HEADERS="Content-Type, access-control-allow-headers, Authorization, X-Requested-With, X-Referer",t.CORS={METHODS:"access-control-allow-methods",CREDENTIALS:"access-control-allow-credentials",ORIGIN:"access-control-allow-origin",HEADERS:"access-control-allow-headers"},t.ACCESS_CONTROL_REQUEST_HEADERS="access-control-request-headers",t.DEFAULT_CORS_ORIGIN="*",t.DEFAULT_CORS_METHODS="*",t.DEFAULT_CORS_CREDENTIALS="true",t.ORIGIN="origin",t.DISABLED_STORAGE_KEY="disabled",t.JSONC_STORAGE_KEY="config_for_shown",t.JSON_STORAGE_KEY="config",t.CLEAR_CACHE_ENABLED_STORAGE_KEY="clearCacheEnabled",t.CORS_STORAGE_KEY="cors",t.CORS_ENABLED_STORAGE_KEY="corsEnabled",t.PROXY_STORAGE_KEY="proxy",t.MILLISECONDS_PER_WEEK=6048e5,t.RULE="rule",t.LANGUAGE_JSON="json",t.CHANGE="change",t.DOM_CONTENT_LOADED="DOMContentLoaded",t.SWITCH_DOM_ID="J_Switch",t.SWITCH_INNER_DOM_ID="J_SwitchInner",t.SWITCH_AREA_DOM_ID="J_SwitchArea",t.NEW_TAB_DOM_ID="J_OpenInNewTab",t.OPEN_README_DOM_ID="J_OpenReadme",t.CONTAINER_DOM_ID="J_Container",t.STATUS_DOM_ID="J_Status",t.CLEAR_CACHE_ENABLED_DOM_ID="J_ClearCacheEnabled",t.CORS_ENABLED_DOM_ID="J_CorsEnabled",t.SWITCH_CHECKED_CLASSNAME="ant-switch-checked",t.POPUP_HTML_PATH="output/XSwitch.html",t.MONACO_VS_PATH="../lib/monaco-editor/min/vs",t.MONACO_CONTRIBUTION_PATH="vs/language/json/monaco.contribution",t.HELP_URL="https://yuque.com/jiushen/blog/xswitch-readme",t.DEFAULT_FONT_FAMILY="source-code-pro,Menlo,Monaco,Consolas,Courier New,monospace",t.PLATFORM_MAC="Mac",t.OPTIONS_SAVED="Options saved.",t.EMPTY_STRING="",t.KEY_DOWN="keydown",t.CLICK="click",t.ANYTHING="anyString",t.FORMAT_DOCUMENT_CMD="editor.action.formatDocument",t.KEY_CODE_S=83,t.SHOW_FOLDING_CONTROLS="always",t.OPACITY_VISIBLE="1",t.NULL_STRING="null",t.RULE_COMPLETION='[\n  "${1:from}",\n  "${1:to}",\n],',t.DEFAULT_DATA='{\n  // Use IntelliSense to learn about possible links.\n  // Type `rule` to quick insert rule.\n  // 输入 rule 来快速插入规则\n  // For more information, visit: https://github.com/yize/xswitch\n  "proxy": [\n    [\n      ".production.min.js",\n      // ".production(.min)?.js",\n      ".development.js"\n      // "react.development.js",\n    ],\n    [\n      "16.4.1",\n      "16.4.0",\n    ]\n    // then try visit https://unpkg.com/react@16.4.1/umd/react.production.min.js\n  ],\n  // urls that want CORS\n  "cors": [\n    "mocks.a.com",\n    "mocks.b.com"\n  ]\n}\n'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.REG="reg",e.STRING="string"}(t.UrlType||(t.UrlType={})),function(e){e.YES="enabled",e.NO="disabled"}(t.Enabled||(t.Enabled={})),function(e){e.ON="#1890ff",e.OFF="#bfbfbf",e.ERROR="#f5222d"}(t.IconBackgroundColor||(t.IconBackgroundColor={})),function(e){e.ERROR="Error",e.OFF="OFF",e.ON="ON"}(t.BadgeText||(t.BadgeText={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),E=n(1),o=(e,t)=>{if(r.REG.FORWARD.test(t)){if(new RegExp(t.replace("??","\\?\\?"),"i").test(e))return E.UrlType.REG}else{if(e.indexOf(t)>-1)return E.UrlType.STRING}return!1};window._forward||(window._forward=new class{constructor(){this._lastRequestId=null,this._disabled=E.Enabled.YES,this._config={},this._originRequest=new Map,this._originRequestHeaders=new Map,this._urls=new Array(200)}get urls(){return this._urls}get disabled(){return this._disabled}set disabled(e){this._disabled=e}get config(){return this._config}set config(e){this._config=Object.assign({},e)}onHeadersReceivedCallback(e,t=!0){let n=this.config.cors,s=!1;if(n&&n.length&&n.forEach(t=>{o(e.url,t)&&(s=!0)}),this.disabled==E.Enabled.NO||!t||!s)return{};e.url;let _=[],a=(this._originRequest.get(e.requestId)?this._originRequest.get(e.requestId):e.initiator)||r.DEFAULT_CORS_ORIGIN;if(e.responseHeaders&&e.responseHeaders.filter){let t=!1,n=r.EMPTY_STRING;_=e.responseHeaders.filter(e=>(r.CORS.ORIGIN===e.name.toLowerCase()&&(n=e.value),r.CORS.CREDENTIALS===e.name.toLowerCase()&&(t=e.value),[r.CORS.ORIGIN,r.CORS.CREDENTIALS,r.CORS.METHODS,r.CORS.HEADERS].indexOf(e.name.toLowerCase())<0)),t&&(a=n)}a===r.DEFAULT_CORS_ORIGIN&&this._originRequest.get(e.requestId)===r.NULL_STRING&&(a=r.DEFAULT_CORS_ORIGIN),_.push({name:r.CORS.ORIGIN,value:a}),_.push({name:r.CORS.CREDENTIALS,value:r.DEFAULT_CORS_CREDENTIALS}),_.push({name:r.CORS.METHODS,value:r.DEFAULT_CORS_METHODS});let i=r.EMPTY_STRING;return this._originRequestHeaders.get(e.requestId)&&(i=","+this._originRequestHeaders.get(e.requestId)),_.push({name:r.CORS.HEADERS,value:r.DEFAULT_CREDENTIALS_RESPONSE_HEADERS+i}),{responseHeaders:_}}redirectToMatchingRule(e){const t=this.config.proxy;let n=e.url;if(!t||!t.length||r.REG.CHROME_EXTENSION.test(n))return{};/http(s?):\/\/.*\.(js|css|json|jsonp)/.test(n)&&this._urls.indexOf(n)<0&&(this._urls.shift(),this._urls.push(n));try{for(let r=0;r<t.length;r++){const s=t[r];if(s&&s[0]&&"string"==typeof s[1]){const t=s[0],r=o(n,t);if(e.requestId!==this._lastRequestId)if(r===E.UrlType.REG){const e=new RegExp(t.replace("??","\\?\\?"),"i");n=n.replace(e,s[1])}else r===E.UrlType.STRING&&(n=n.split(s[0]).join(s[1]))}}}catch(e){console.error("rule match error",e)}return this._lastRequestId=e.requestId,n===e.url?{}:{redirectUrl:n}}onBeforeSendHeadersCallback(e){let t=[];for(let n=0;n<e.requestHeaders.length;++n){const E=e.requestHeaders[n].name.toLowerCase();E===r.ORIGIN?this._originRequest.set(e.requestId,e.requestHeaders[n].value):(E===r.ACCESS_CONTROL_REQUEST_HEADERS||r.REG.X_HEADER.test(E))&&t.push(E)}return t.length&&this._originRequestHeaders.set(e.requestId,t.join(",")),{requestHeaders:e.requestHeaders}}onBeforeRequestCallback(e){return this.redirectToMatchingRule(e)}}),t.default=window._forward},,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),E=n(1),o=n(2);let s=!1,_=!0,a=!0,i=!1;function l(e,t){try{t(!1,JSON.parse(e))}catch(e){t(e)}}function R(e,t){const{browserAction:n}=chrome;n.setBadgeText({text:r.EMPTY_STRING+e}),n.setBadgeBackgroundColor({color:t})}function O(){i?R(E.BadgeText.ERROR,E.IconBackgroundColor.ERROR):o.default[r.DISABLED_STORAGE_KEY]!==E.Enabled.NO?R(o.default[r.JSON_STORAGE_KEY][r.PROXY_STORAGE_KEY].length,E.IconBackgroundColor.ON):R(E.BadgeText.OFF,E.IconBackgroundColor.OFF)}chrome.storage.sync.get(r.JSON_STORAGE_KEY,e=>{e&&e[r.JSON_STORAGE_KEY]?l(e[r.JSON_STORAGE_KEY],(e,t)=>{e?(o.default[r.JSON_STORAGE_KEY][r.PROXY_STORAGE_KEY]=[],i=!0):(o.default[r.JSON_STORAGE_KEY]=t,i=!1)}):(o.default[r.JSON_STORAGE_KEY]={[r.PROXY_STORAGE_KEY]:[],[r.CORS_STORAGE_KEY]:[]},i=!1)}),chrome.storage.sync.get({[r.DISABLED_STORAGE_KEY]:E.Enabled.YES,[r.CLEAR_CACHE_ENABLED_STORAGE_KEY]:E.Enabled.YES,[r.CORS_ENABLED_STORAGE_KEY]:E.Enabled.YES},e=>{o.default[r.DISABLED_STORAGE_KEY]=e[r.DISABLED_STORAGE_KEY],_=e[r.CLEAR_CACHE_ENABLED_STORAGE_KEY]===E.Enabled.YES,a=e[r.CORS_ENABLED_STORAGE_KEY]===E.Enabled.YES,O()}),chrome.storage.onChanged.addListener(e=>{e[r.JSON_STORAGE_KEY]&&l(e[r.JSON_STORAGE_KEY].newValue,(e,t)=>{e?(o.default[r.JSON_STORAGE_KEY][r.PROXY_STORAGE_KEY]=[],i=!0):(o.default[r.JSON_STORAGE_KEY]=t,i=!1)}),e[r.DISABLED_STORAGE_KEY]&&(o.default[r.DISABLED_STORAGE_KEY]=e[r.DISABLED_STORAGE_KEY].newValue),e[r.CLEAR_CACHE_ENABLED_STORAGE_KEY]&&(_=e[r.CLEAR_CACHE_ENABLED_STORAGE_KEY].newValue===E.Enabled.YES),e[r.CORS_ENABLED_STORAGE_KEY]&&(a=e[r.CORS_ENABLED_STORAGE_KEY].newValue===E.Enabled.YES),O()}),chrome.webRequest.onBeforeRequest.addListener(e=>o.default[r.DISABLED_STORAGE_KEY]!==E.Enabled.NO?(_&&function(){if(!s){s=!0;const e=r.MILLISECONDS_PER_WEEK,t=(new Date).getTime()-e;chrome.browsingData.removeCache({since:t},()=>{s=!1})}}(),o.default.onBeforeRequestCallback(e)):{},{urls:[r.ALL_URLS]},[r.BLOCKING]),chrome.webRequest.onHeadersReceived.addListener(function(e){return o.default.onHeadersReceivedCallback(e,a)},{urls:[r.ALL_URLS]},[r.BLOCKING,r.RESPONSE_HEADERS]),chrome.webRequest.onBeforeSendHeaders.addListener(e=>o.default.onBeforeSendHeadersCallback(e),{urls:[r.ALL_URLS]},[r.BLOCKING,r.REQUEST_HEADERS])}]);