!function(e){var t={};function r(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REG={TRIM_JSON:/(,+)([^a-z0-9["])/gi,CHROME_EXTENSION:/^chrome-extension:\/\//i,FORWARD:/\\|\[|]|\(|\)|\*|\$|\^/i,WHITESPACE:/\s+/g,X_HEADER:/^x-/},t.ALL_URLS="<all_urls>",t.BLOCKING="blocking",t.REQUEST_HEADERS="requestHeaders",t.RESPONSE_HEADERS="responseHeaders",t.DEFAULT_CREDENTIALS_RESPONSE_HEADERS="Content-Type, access-control-allow-headers, Authorization, X-Requested-With, X-Referer",t.CORS={METHODS:"access-control-allow-methods",CREDENTIALS:"access-control-allow-credentials",ORIGIN:"access-control-allow-origin",HEADERS:"access-control-allow-headers"},t.ACCESS_CONTROL_REQUEST_HEADERS="access-control-request-headers",t.DEFAULT_CORS_ORIGIN="*",t.DEFAULT_CORS_METHODS="*",t.DEFAULT_CORS_CREDENTIALS="true",t.ORIGIN="origin",t.DISABLED_STORAGE_KEY="disabled",t.JSONC_STORAGE_KEY="config_for_shown",t.JSON_STORAGE_KEY="config",t.CLEAR_CACHE_ENABLED_STORAGE_KEY="clearCacheEnabled",t.CORS_STORAGE_KEY="cors",t.CORS_ENABLED_STORAGE_KEY="corsEnabled",t.PROXY_STORAGE_KEY="proxy",t.MILLISECONDS_PER_WEEK=6048e5,t.RULE="rule",t.LANGUAGE_JSON="json",t.CHANGE="change",t.DOM_CONTENT_LOADED="DOMContentLoaded",t.SWITCH_DOM_ID="J_Switch",t.SWITCH_INNER_DOM_ID="J_SwitchInner",t.SWITCH_AREA_DOM_ID="J_SwitchArea",t.NEW_TAB_DOM_ID="J_OpenInNewTab",t.OPEN_README_DOM_ID="J_OpenReadme",t.CONTAINER_DOM_ID="J_Container",t.STATUS_DOM_ID="J_Status",t.CLEAR_CACHE_ENABLED_DOM_ID="J_ClearCacheEnabled",t.CORS_ENABLED_DOM_ID="J_CorsEnabled",t.SWITCH_CHECKED_CLASSNAME="ant-switch-checked",t.POPUP_HTML_PATH="output/XSwitch.html",t.MONACO_VS_PATH="../lib/monaco-editor/min/vs",t.MONACO_CONTRIBUTION_PATH="vs/language/json/monaco.contribution",t.HELP_URL="https://yuque.com/jiushen/blog/xswitch-readme",t.DEFAULT_FONT_FAMILY="source-code-pro,Menlo,Monaco,Consolas,Courier New,monospace",t.PLATFORM_MAC="Mac",t.OPTIONS_SAVED="Options saved.",t.EMPTY_STRING="",t.KEY_DOWN="keydown",t.CLICK="click",t.ANYTHING="anyString",t.FORMAT_DOCUMENT_CMD="editor.action.formatDocument",t.KEY_CODE_S=83,t.SHOW_FOLDING_CONTROLS="always",t.OPACITY_VISIBLE="1",t.NULL_STRING="null",t.RULE_COMPLETION='[\n  "${1:from}",\n  "${1:to}",\n],',t.DEFAULT_DATA='{\n  // Use IntelliSense to learn about possible links.\n  // Type `rule` to quick insert rule.\n  // 输入 rule 来快速插入规则\n  // For more information, visit: https://github.com/yize/xswitch\n  "proxy": [\n    [\n      ".production.min.js",\n      // ".production(.min)?.js",\n      ".development.js"\n      // "react.development.js",\n    ],\n    [\n      "16.4.1",\n      "16.4.0",\n    ]\n    // then try visit https://unpkg.com/react@16.4.1/umd/react.production.min.js\n  ],\n  // urls that want CORS\n  "cors": [\n    "mocks.a.com",\n    "mocks.b.com"\n  ]\n}\n'},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.REG="reg",e.STRING="string"}(t.UrlType||(t.UrlType={})),function(e){e.YES="enabled",e.NO="disabled"}(t.Enabled||(t.Enabled={})),function(e){e.ON="#1890ff",e.OFF="#bfbfbf",e.ERROR="#f5222d"}(t.IconBackgroundColor||(t.IconBackgroundColor={})),function(e){e.ERROR="Error",e.OFF="OFF",e.ON="ON"}(t.BadgeText||(t.BadgeText={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(0),s=r(1),o=(e,t)=>{if(n.REG.FORWARD.test(t)){if(new RegExp(t.replace("??","\\?\\?"),"i").test(e))return s.UrlType.REG}else{if(e.indexOf(t)>-1)return s.UrlType.STRING}return!1};window._forward||(window._forward=new class{constructor(){this._lastRequestId=null,this._disabled=s.Enabled.YES,this._config={},this._originRequest=new Map,this._originRequestHeaders=new Map,this._urls=new Array(200)}get urls(){return this._urls}get disabled(){return this._disabled}set disabled(e){this._disabled=e}get config(){return this._config}set config(e){this._config=Object.assign({},e)}onHeadersReceivedCallback(e,t=!0){let r=this.config.cors,i=!1;if(r&&r.length&&r.forEach(t=>{o(e.url,t)&&(i=!0)}),this.disabled==s.Enabled.NO||!t||!i)return{};e.url;let _=[],a=(this._originRequest.get(e.requestId)?this._originRequest.get(e.requestId):e.initiator)||n.DEFAULT_CORS_ORIGIN;if(e.responseHeaders&&e.responseHeaders.filter){let t=!1,r=n.EMPTY_STRING;_=e.responseHeaders.filter(e=>(n.CORS.ORIGIN===e.name.toLowerCase()&&(r=e.value),n.CORS.CREDENTIALS===e.name.toLowerCase()&&(t=e.value),[n.CORS.ORIGIN,n.CORS.CREDENTIALS,n.CORS.METHODS,n.CORS.HEADERS].indexOf(e.name.toLowerCase())<0)),t&&(a=r)}a===n.DEFAULT_CORS_ORIGIN&&this._originRequest.get(e.requestId)===n.NULL_STRING&&(a=n.DEFAULT_CORS_ORIGIN),_.push({name:n.CORS.ORIGIN,value:a}),_.push({name:n.CORS.CREDENTIALS,value:n.DEFAULT_CORS_CREDENTIALS}),_.push({name:n.CORS.METHODS,value:n.DEFAULT_CORS_METHODS});let E=n.EMPTY_STRING;return this._originRequestHeaders.get(e.requestId)&&(E=","+this._originRequestHeaders.get(e.requestId)),_.push({name:n.CORS.HEADERS,value:n.DEFAULT_CREDENTIALS_RESPONSE_HEADERS+E}),{responseHeaders:_}}redirectToMatchingRule(e){const t=this.config.proxy;let r=e.url;if(!t||!t.length||n.REG.CHROME_EXTENSION.test(r))return{};/http(s?):\/\/.*\.(js|css|json|jsonp)/.test(r)&&this._urls.indexOf(r)<0&&(this._urls.shift(),this._urls.push(r));try{for(let n=0;n<t.length;n++){const i=t[n];if(i&&i[0]&&"string"==typeof i[1]){const t=i[0],n=o(r,t);if(e.requestId!==this._lastRequestId)if(n===s.UrlType.REG){const e=new RegExp(t.replace("??","\\?\\?"),"i");r=r.replace(e,i[1])}else n===s.UrlType.STRING&&(r=r.split(i[0]).join(i[1]))}}}catch(e){console.error("rule match error",e)}return this._lastRequestId=e.requestId,r===e.url?{}:{redirectUrl:r}}onBeforeSendHeadersCallback(e){let t=[];for(let r=0;r<e.requestHeaders.length;++r){const s=e.requestHeaders[r].name.toLowerCase();s===n.ORIGIN?this._originRequest.set(e.requestId,e.requestHeaders[r].value):(s===n.ACCESS_CONTROL_REQUEST_HEADERS||n.REG.X_HEADER.test(s))&&t.push(s)}return t.length&&this._originRequestHeaders.set(e.requestId,t.join(",")),{requestHeaders:e.requestHeaders}}onBeforeRequestCallback(e){return this.redirectToMatchingRule(e)}}),t.default=window._forward}]);